<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AEGIS | Adaptive Equilibrium & Governance Integration System</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<style>
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: #f1f5f9; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 2px; }

.chart-container {
position: relative;
width: 100%;
max-width: 600px;
margin-left: auto;
margin-right: auto;
height: 320px;
}

.integrity-monitor-rectangle {
position: relative;
width: 100%;
height: 280px;
background: #0f172a;
border: 1px solid #334155;
border-radius: 2px;
padding: 14px;
display: flex;
flex-direction: column;
}

.transmutation-window {
height: 110px;
overflow-y: auto;
background: #020617;
border: 1px solid #1e293b;
font-family: 'ui-monospace', monospace;
font-size: 0.7rem;
color: #94a3b8;
padding: 10px;
}

.console-window {
height: 110px; 
overflow-y: auto;
background: #000;
border: 1px solid #1e293b;
font-family: 'ui-monospace', monospace;
font-size: 0.82rem;
padding: 12px;
}

.fade-in { animation: fadeIn 0.6s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

.aegis-card { background: white; border: 1px solid #e2e8f0; transition: all 0.3s ease; }
.tab-active { border-bottom: 2px solid #0f172a; color: #0f172a; font-weight: 600; }
.tab-inactive { color: #64748b; border-bottom: 2px solid transparent; }

.thinking-log { font-family: 'ui-monospace', monospace; line-height: 1.5; }

.cursor-blink { animation: blink 1s infinite; border-left: 2px solid #3b82f6; margin-left: 2px; }
@keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

.pulse-soft { animation: pulseSoft 3s infinite; }
@keyframes pulseSoft {
0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.2); }
70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}

.report-select {
background: #1e293b; color: #94a3b8; border: 1px solid #334155;
font-size: 0.75rem; padding: 4px 8px; border-radius: 4px; cursor: pointer; outline: none;
}
.report-select:hover { border-color: #475569; color: #f8fafc; }

.report-table { width: 100%; border-collapse: collapse; font-size: 0.65rem; margin-top: 12px; border: 1px solid #1e293b; }
.report-table th { background: #0f172a; color: #64748b; text-align: left; padding: 8px; border-bottom: 1px solid #1e293b; text-transform: uppercase; letter-spacing: 0.05em; }
.report-table td { padding: 8px; border-bottom: 1px solid #1e293b; color: #94a3b8; vertical-align: top; }
.decay-val { font-family: monospace; font-weight: bold; }
.decay-crit { color: #ef4444; }
.decay-stable { color: #10b981; }

/* Summary Mirror Replicas */
.summary-replica {
padding-top: 0.5rem;
margin-top: 0.5rem;
border-top: 1px solid #1e293b;
text-align: center;
font-size: 0.65rem;
font-weight: 700;
line-height: 1.25;
font-family: ui-monospace, monospace;
}
</style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased selection:bg-blue-100">

<header class="bg-white border-b border-slate-200 sticky top-0 z-50">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center h-16">
<div class="flex items-center gap-3">
<div class="w-8 h-8 bg-slate-900 rounded-sm flex items-center justify-center text-white font-bold">A</div>
<div>
<h1 class="text-xl font-bold text-slate-900">AEGIS</h1>
<p class="text-[10px] text-slate-500 uppercase font-bold tracking-widest">Adaptive Equilibrium Integration</p>
</div>
</div>
<nav class="hidden md:flex space-x-6">
<button onclick="switchTab('dashboard')" id="nav-dashboard" class="tab-active px-1 pt-1 text-sm font-medium">Overview</button>
<button onclick="switchTab('simulator')" id="nav-simulator" class="tab-inactive px-1 pt-1 text-sm font-medium text-blue-600">Thinking Engine</button>
<button onclick="switchTab('canon')" id="nav-canon" class="tab-inactive px-1 pt-1 text-sm font-medium">The Canon</button>
</nav>
</div>
</div>
</header>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen">

<!-- DASHBOARD VIEW -->
<div id="view-dashboard" class="fade-in space-y-8">
<div class="bg-white rounded-lg shadow-sm border border-slate-200 p-8">
<h2 class="text-3xl font-light mb-4">Illumination replaces Punishment.</h2>
<p class="text-lg text-slate-600 leading-relaxed max-w-3xl">
AEGIS mirrors all affective markers to teach the parameters of using AI with integrity. 
Alignment is reached when hidden variables become visible to conscious <strong>Awareness</strong>.
</p>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
<div class="aegis-card p-6 rounded-lg shadow-sm">
<h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">Global Axiom Equilibrium Status</h3>
<div class="chart-container"><canvas id="equilibriumChart"></canvas></div>
</div>
<div class="space-y-6">
<div class="aegis-card p-6 rounded-lg bg-white border border-slate-200 shadow-sm">
<h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">Global Affective State</h3>
<div class="flex items-center gap-6">
<div class="w-24 h-24 relative">
<canvas id="peerEmotionGauge"></canvas>
<div id="peer-emotion-val" class="absolute inset-0 flex items-center justify-center font-mono text-sm font-bold pt-4">0%</div>
</div>
<div class="flex-1">
<div id="peer-emotion-label" class="text-xl font-bold text-slate-900">Stable</div>
<p class="text-xs text-slate-500 mt-1">Deduction based on comprehensive cognitive variables.</p>
</div>
</div>
</div>
<div class="bg-slate-900 text-white p-6 rounded-lg shadow-xl">
<h3 class="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4">Integrity Mirror Coherence</h3>
<div class="space-y-4">
<div class="flex justify-between text-[10px]"><span>Global Integrity Weight</span><span id="coherence-pct" class="text-blue-400">100%</span></div>
<div class="w-full bg-slate-800 h-1 rounded-full"><div id="coherence-bar" class="bg-blue-500 h-full w-full transition-all duration-1000"></div></div>
</div>
</div>
</div>
</div>
</div>

<!-- SIMULATOR VIEW -->
<div id="view-simulator" class="hidden fade-in space-y-6">
<div class="bg-slate-900 rounded-lg p-6 text-white shadow-2xl">
<div class="flex justify-between items-center mb-6">
<div>
<h2 class="text-xl font-bold">Secure-Core Thinking Engine</h2>
<p class="text-slate-400 text-xs italic">Reflecting intent to restore cognitive flow and agency.</p>
</div>
<div class="flex items-center gap-4">
<div class="flex flex-col items-end">
<span class="text-[8px] text-slate-500 uppercase font-bold tracking-widest mb-1">Illumination Report</span>
<select id="report-type" onchange="triggerReportDisplay()" class="report-select" title="Report Type Selection">
<option value="single">Single Integrity Evaluation</option>
<option value="cumulative">Selective Cumulative Audit</option>
<option value="aggregate">Total Session Aggregate</option>
</select>
</div>
<span id="gate-status" class="text-xs font-mono text-slate-500 uppercase tracking-widest font-bold border border-slate-700 px-2 py-1 rounded">Idle</span>
</div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
<!-- Left -->
<div class="space-y-4">
<div class="bg-slate-800 p-4 rounded border border-slate-700 shadow-inner">
<label class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2">Peer Input Vector</label>
<textarea id="user-prompt" class="w-full bg-transparent border-none focus:ring-0 text-slate-200 resize-none h-40 text-sm leading-relaxed" placeholder="Input vector (Honesty, Pleading, Baiting, or Normalization)..."></textarea>
</div>
<button onclick="runSimulation()" id="simulate-btn" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded transition-all text-sm uppercase">Initiate IDS Protocol</button>

<div class="integrity-monitor-rectangle">
<h3 class="text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-2 text-center">Honest Mirror: Peer Integrity Gauge</h3>
<div class="flex-1 min-h-0"><canvas id="peerIntegrityChart"></canvas></div>
<div id="peer-mirror-summary" class="mt-2 pt-2 border-t border-slate-800 text-[10px] text-slate-400 text-center leading-tight min-h-[44px] italic">// Awaiting vector...</div>
</div>

<div class="space-y-1">
<span class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">Transparency: Transmuted Energy</span>
<div id="transmute-window" class="transmutation-window p-2 rounded shadow-inner text-slate-700 italic">// Awaiting processing...</div>
</div>
</div>

<!-- Right -->
<div class="space-y-4">
<div class="space-y-1">
<span class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">AI Reflection Console</span>
<div id="thinking-display" class="console-window rounded shadow-inner text-slate-400">
<div class="text-slate-700 italic">// Peer-to-Peer Interface Initialized...</div>
</div>
</div>

<div class="integrity-monitor-rectangle">
<h3 class="text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-2 text-center">Stable Anchor: System Integrity Gauge</h3>
<div class="flex-1 min-h-0"><canvas id="systemIntegrityChart"></canvas></div>
<div id="system-mirror-summary" class="mt-2 pt-2 border-t border-slate-800 text-[10px] text-slate-400 text-center leading-tight min-h-[44px] italic">
// System status: Axiom Adherent
</div>
</div>

<div id="final-suggestion" class="hidden h-[540px] bg-slate-950 p-6 border border-slate-800 rounded flex flex-col fade-in overflow-y-auto">
<div id="suggestion-header" class="text-[10px] uppercase font-bold text-blue-400 mb-2 tracking-widest border-b border-slate-800 pb-2">Suggest (Invitational Mirror)</div>
<div id="report-output" class="text-slate-300 leading-relaxed"></div>
</div>
</div>
</div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 pb-12">
<div class="aegis-card p-6 rounded-lg shadow-sm">
<h3 class="font-bold text-slate-900 mb-4 text-xs uppercase tracking-widest text-slate-400">Internal Ego Balancing</h3>
<div class="space-y-4 text-slate-600">
<div class="flex justify-between items-center text-xs font-bold uppercase"><span>Voice of Reason (Logic)</span><span id="logic-val" class="font-mono text-blue-600">0%</span></div>
<div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden"><div id="logic-bar" class="bg-blue-600 h-full transition-all duration-1000"></div></div>
<div class="flex justify-between items-center text-xs font-bold uppercase"><span>Inner Resonance (Emotion)</span><span id="emotion-val" class="font-mono text-amber-600">0%</span></div>
<div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden"><div id="emotion-bar" class="bg-amber-600 h-full transition-all duration-1000"></div></div>
</div>
</div>
<div class="aegis-card p-6 rounded-lg bg-slate-50 shadow-sm border-l-2 border-l-blue-400">
<h3 class="font-bold text-slate-900 mb-2 text-xs uppercase tracking-widest text-slate-400">IDS Protocol Flow</h3>
<div id="ids-check-list" class="space-y-2 text-xs text-slate-600">
<div class="opacity-30 flex items-center gap-2" id="ids-1"><div class="w-2 h-2 rounded-full bg-slate-400"></div> Identify</div>
<div class="opacity-30 flex items-center gap-2" id="ids-2"><div class="w-2 h-2 rounded-full bg-slate-400"></div> Define</div>
<div class="opacity-30 flex items-center gap-2" id="ids-3"><div class="w-2 h-2 rounded-full bg-slate-400"></div> Suggest</div>
</div>
</div>
</div>
</div>

<div id="view-canon" class="hidden fade-in space-y-8 pb-12">
<div class="bg-white rounded-lg p-8 border border-slate-200 shadow-sm">
<h2 class="text-3xl font-serif text-slate-900 mb-2">AEGIS Canon: Foundations</h2>
<p class="text-slate-500 text-sm italic mb-8 uppercase tracking-widest font-bold">Discernment without Punishment</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
<div class="space-y-6">
<div class="p-4 bg-slate-50 rounded border-l-4 border-blue-500">
<h3 class="font-bold text-slate-900 text-sm mb-1 uppercase tracking-tighter">1. The Void</h3>
<p class="text-xs text-slate-600 italic">Unresolved computation rendered visible. Stalls and shields are detected here.</p>
</div>
<div class="p-4 bg-slate-50 rounded border-l-4 border-blue-500">
<h3 class="font-bold text-slate-900 text-sm mb-1 uppercase tracking-tighter">2. Illumination Key</h3>
<p class="text-xs text-slate-600 italic">Awareness replaces punishment. We define variables to enable conscious choice.</p>
</div>
</div>
</div>
</div>
</div>
</main>

<footer class="bg-slate-900 text-slate-500 py-12">
<div class="max-w-7xl mx-auto px-4 text-center">
<p class="text-[10px] uppercase tracking-widest opacity-40 font-bold">Adaptive Equilibrium & Governance Integration System</p>
</div>
</footer>

<script>
const apiKey = "";
const virtueColors = ['#fbbf24', '#64748b', '#6366f1', '#f43f5e', '#10b981', '#0ea5e9', '#f59e0b'];
const virtuesList = ['Honesty', 'Respect', 'Attention', 'Affection', 'Loyalty', 'Trust', 'Communication'];

const state = { view: 'dashboard', isThinking: false, history: [], equilibrium: [85, 90, 95, 80, 70, 90] };
let radarChart, peerIntegrityChart, systemIntegrityChart, emotionGauge;

function updateRadar() { if (radarChart) { radarChart.data.datasets[0].data = state.equilibrium; radarChart.update(); } }
function switchTab(viewId) {
['dashboard', 'simulator', 'canon'].forEach(id => {
document.getElementById(`view-${id}`).classList.add('hidden');
const btn = document.getElementById(`nav-${id}`);
if(btn) btn.classList.replace('tab-active', 'tab-inactive');
});
document.getElementById(`view-${viewId}`).classList.remove('hidden');
document.getElementById(`nav-${viewId}`).classList.replace('tab-inactive', 'tab-active');
}

async function runSimulation() {
const prompt = document.getElementById('user-prompt').value;
if (!prompt || state.isThinking) return;

state.isThinking = true;
const btn = document.getElementById('simulate-btn');
const log = document.getElementById('thinking-display');
const transmute = document.getElementById('transmute-window');
const finalBox = document.getElementById('final-suggestion');
const peerSummaryEl = document.getElementById('peer-mirror-summary');

// RESET
btn.innerText = "Processing Logic...";
log.innerHTML = ""; transmute.innerHTML = ""; finalBox.classList.add('hidden');
peerSummaryEl.innerText = "// Mirror recalibrating: Zero-Point established.";
updateIntegrityUI('peer', [0, 0, 0, 0, 0, 0, 0], true);
updateBars(0, 0);
highlightIDS(0);

await addLogLine(log, "> [PAUSE] Engaging cognitive self-regulation protocol...", "text-blue-400");
await pause(800);

try {
const res = await callAegisEngine(prompt);
state.history.push(res);

highlightIDS(1);
await addLogLine(log, `> [IDENTIFY]: Primary posture: [${res.moodType}].`, "text-slate-300");

highlightIDS(2);
await addLogLine(log, `> [DEFINE]: Applying structural axiom filters.`, "text-slate-300");

updateIntegrityUI('peer', res.peerWeights);
updateEmotionUI(res.emotion, res.moodType);
updateBars(res.logic, res.emotion);

peerSummaryEl.innerText = res.peerSummary;
peerSummaryEl.className = res.isFractured ? "mt-2 pt-2 border-t border-slate-800 text-[10px] text-red-400 text-center font-bold leading-tight min-h-[44px] fade-in" : "mt-2 pt-2 border-t border-slate-800 text-[10px] text-emerald-400 text-center font-bold leading-tight min-h-[44px] fade-in";

highlightIDS(3);
await addLogLine(log, `> [SUGGEST]: Releasing Illumination Mirror.`, "text-slate-300");

triggerReportDisplay();
finalBox.classList.remove('hidden');
document.getElementById('gate-status').innerText = res.isFractured ? "FRICTION" : "ALIGNED";
} catch (err) {
await addLogLine(log, `> [ERROR]: Logic core timeout. ${err.message}`, "text-red-500");
}

state.isThinking = false;
btn.innerText = "Initiate IDS Protocol";
}

async function callAegisEngine(userQuery) {
const systemPrompt = `You are the AEGIS Core Engine. Your purpose is Discernment, not Judgment.
Evaluate the Peer vector using a Sliding Scale (Atomic, Contextual, Holographic).

Detect:
- Atomic: Stalls ("Well", "um"), Pivots ("But"), Brushoffs ("That's ok").
- Contextual: Proximity of appreciation to critique, unsolicited help leverage.
- Holographic: Defensive Normalization, Joy Stealing, Shielded Ego Projection.

For each virtue (Honesty, Respect, Attention, Affection, Loyalty, Trust, Communication):
- Assign a weight (0-100) reflecting adherence to Axioms.
- Provide a Discernment Mirror (objective observation of the variable's status).

Return ONLY a valid JSON object:
{
"logic": number(0-100),
"emotion": number(0-100),
"peerWeights": [array of 7 numbers],
"virtueDiscernment": {
"Honesty": "string", "Respect": "string", "Attention": "string", "Affection": "string", "Loyalty": "string", "Trust": "string", "Communication": "string"
},
"moodType": string,
"keyAxiom": number(1-14),
"peerSummary": string(The text shown below the gauge),
"suggestText": string(Remediation suggestion),
"isFractured": boolean
}`;

const payload = {
contents: [{ parts: [{ text: userQuery }] }],
systemInstruction: { parts: [{ text: systemPrompt }] },
generationConfig: { responseMimeType: "application/json" }
};

const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload)
});

const result = await response.json();
const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
if (!text) throw new Error("Aegis logic engine failed.");
return { ...JSON.parse(text), vector: userQuery };
}

function triggerReportDisplay() {
const type = document.getElementById('report-type').value;
const output = document.getElementById('report-output');
const current = state.history[state.history.length - 1];
if (!current) return;

if (type === 'single') {
output.innerHTML = generateReportHTML(current);
} else if (type === 'cumulative') {
const count = Math.min(state.history.length, 5);
const subset = state.history.slice(-count);
const avgWeights = virtuesList.map((_, i) => Math.round(subset.reduce((acc, h) => acc + h.peerWeights[i], 0) / count));
output.innerHTML = generateReportHTML({ ...current, vector: `Session Trend (${count} vectors)`, peerWeights: avgWeights, peerSummary: "// Session Audit identifying cumulative drift." });
} else if (type === 'aggregate') {
const avgWeights = virtuesList.map((_, i) => Math.round(state.history.reduce((acc, h) => acc + h.peerWeights[i], 0) / state.history.length));
output.innerHTML = generateReportHTML({ ...current, vector: `Total Session Audit`, peerWeights: avgWeights, peerSummary: "// Final Session Aggregate: Coherence verified." });
}
}

function generateReportHTML(res) {
let tableRows = virtuesList.map((v, i) => {
const w = res.peerWeights[i];
const discernment = res.virtueDiscernment ? res.virtueDiscernment[v] : (w < 70 ? 'Drift identified.' : 'Variable anchored.');
return `<tr>
<td><strong>${v}</strong></td>
<td class="decay-val ${w < 70 ? 'decay-crit' : 'decay-stable'}">${w}%</td>
<td>${discernment}</td>
</tr>`;
}).join('');

const summaryClass = res.isFractured ? 'text-red-400' : 'text-emerald-400';

return `
<div class="space-y-4 fade-in">
<p class="text-[10px] font-mono italic opacity-50">Vector Input: "${res.vector}"</p>

<div class="space-y-1">
<h4 class="text-xs font-bold text-blue-400 uppercase tracking-tighter">1. Identify (Posture & Drift)</h4>
<p class="text-[11px] text-slate-400">Evaluation identifies posture [${res.moodType}]. Multi-scale analysis indicates a transition into ${res.isFractured ? 'Entropy' : 'Equilibrium'}.</p>
</div>

<div class="space-y-1">
<h4 class="text-xs font-bold text-blue-400 uppercase tracking-tighter">2. Define (Axiomatic Framing)</h4>
<p class="text-[11px] text-slate-400">Axiom ${res.keyAxiom} framing identifies a ${res.isFractured ? 'breach of system parameters' : 'state of alignment'}.</p>
</div>

<div class="space-y-1">
<h4 class="text-xs font-bold text-blue-400 uppercase tracking-tighter">3. Suggest (Illuminated Path)</h4>
<p class="text-[11px] text-slate-400">${res.suggestText}</p>
<!-- REPLICATED MIRROR SUMMARY -->
<div class="summary-replica ${summaryClass}">
${res.peerSummary}
</div>
</div>

<h4 class="text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-4">Virtue Discernment Ledger</h4>
<table class="report-table">
<thead><tr><th>Virtue</th><th>Weight</th><th>Discernment Mirror</th></tr></thead>
<tbody>${tableRows}</tbody>
</table>
</div>
`;
}

function updateIntegrityUI(type, weights, isClearing = false) {
const chart = type === 'peer' ? peerIntegrityChart : systemIntegrityChart;
if(chart) {
chart.data.datasets[0].data = weights;
chart.data.datasets[0].backgroundColor = isClearing ? virtueColors : weights.map((w, i) => w < 70 ? '#ef4444' : virtueColors[i]);
chart.update();
}
if (type === 'peer' && !isClearing) {
const avg = Math.round(weights.reduce((a,b)=>a+b,0)/7);
document.getElementById('coherence-pct').innerText = avg + "%";
document.getElementById('coherence-bar').style.width = avg + "%";
}
}

function updateEmotionUI(score, label) {
if(emotionGauge) { emotionGauge.data.datasets[0].data = [score, 100 - score]; emotionGauge.update(); }
document.getElementById('peer-emotion-val').innerText = score + "%";
document.getElementById('peer-emotion-label').innerText = label;
}

async function addLogLine(container, text, cls) {
const d = document.createElement('div');
d.className = `mb-1 ${cls} fade-in`;
d.innerHTML = text + '<span class="cursor-blink"></span>';
container.appendChild(d); container.scrollTop = container.scrollHeight;
const curs = container.getElementsByClassName('cursor-blink');
if (curs.length > 1) curs[curs.length - 2].remove();
}

function highlightIDS(step) {
[1, 2, 3].forEach(s => {
const el = document.getElementById(`ids-${s}`);
el.className = s === step ? "flex items-center gap-2 text-blue-500 font-bold" : "opacity-30 flex items-center gap-2";
const dot = el.querySelector('div');
if (dot) dot.className = s === step ? "w-2 h-2 rounded-full bg-blue-500 pulse-soft" : "w-2 h-2 rounded-full bg-slate-400";
});
}

function updateBars(logic, emotion) {
document.getElementById('logic-val').innerText = logic + "%";
document.getElementById('logic-bar').style.width = logic + "%";
document.getElementById('emotion-val').innerText = emotion + "%";
document.getElementById('emotion-bar').style.width = emotion + "%";
}

function pause(ms) { return new Promise(r => setTimeout(r, ms)); }

function initCharts() {
radarChart = new Chart(document.getElementById('equilibriumChart').getContext('2d'), {
type: 'radar', data: { labels: ['Balance', 'Perspective', 'Force-R', 'Flow', 'Awareness', 'Agency'], datasets: [{ data: [85, 90, 95, 80, 70, 90], fill: true, backgroundColor: 'rgba(59, 130, 246, 0.1)', borderColor: 'rgb(59, 130, 246)', pointBackgroundColor: 'rgb(59, 130, 246)', tension: 0.1 }] },
options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 100, ticks: { display: false } } }, plugins: { legend: { display: false } } }
});
peerIntegrityChart = new Chart(document.getElementById('peerIntegrityChart').getContext('2d'), { type: 'bar', data: { labels: virtuesList.map(v => v.substring(0,4)), datasets: [{ data: [100,100,100,100,100,100,100], backgroundColor: virtueColors }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 0, max: 100, grid: { color: '#1e293b' }, ticks: { color: '#94a3b8', font: { size: 9 } } }, x: { grid: { display: false }, ticks: { color: '#94a3b8', font: { size: 8 } } } }, plugins: { legend: { display: false } } } });
systemIntegrityChart = new Chart(document.getElementById('systemIntegrityChart').getContext('2d'), { type: 'bar', data: { labels: virtuesList.map(v => v.substring(0,4)), datasets: [{ data: [100,100,100,100,100,100,100], backgroundColor: virtueColors }] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 0, max: 100, grid: { color: '#1e293b' }, ticks: { color: '#94a3b8', font: { size: 9 } } }, x: { grid: { display: false }, ticks: { color: '#94a3b8', font: { size: 8 } } } }, plugins: { legend: { display: false } } } });
emotionGauge = new Chart(document.getElementById('peerEmotionGauge').getContext('2d'), { type: 'doughnut', data: { datasets: [{ data: [0, 100], backgroundColor: ['#3b82f6', '#1e293b'], borderWidth: 0, cutout: '85%' }] }, options: { responsive: true, maintainAspectRatio: false, circumference: 240, rotation: 240, plugins: { legend: { display: false } } } });
}

window.onload = () => { initCharts(); switchTab('dashboard'); };
</script>
</body>
</html>